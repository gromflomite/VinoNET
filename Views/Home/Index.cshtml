@using Microsoft.AspNetCore.Identity
@using Wineapp.Services;
@inject SignInManager<AppUser> _signInManager
@inject UserManager<AppUser> _userManager
@inject ITastes  _tastesServices
@model Wineapp.Models.ViewModels.WinesVM

@section Styles {
    <link href="@Url.Content("~/css/homeIndex.css")" rel="stylesheet" type="text/css" />
}

@{
    ViewData["Title"] = "Inicio";
}

<h1 class="test">Bienvenido la web del proyecto VinoNET</h1>

<!---------------------------------------------------------------------------------------------------------------------------------------------------->

<div class="doblock">

    <h2 class="dotitle">Denominaciones de Origen</h2>


    <div id="carouseldo" class="carousel slide" data-interval="2000" data-ride="carousel">
        <div class="carousel-inner">

            @{
                int counterdo = 1;
            }

            @foreach (Source source in Model.ListSources)
            {

                if (counterdo == 1)
                {
                    <div class="carousel-item active">
                        <form asp-controller="Wines" asp-action="SourcePreferences">
                            <input type="hidden" name="sourceId" value="@source.Id" />
                            <input type="image" src="~/img/dologo/@source.Logo" />
                        </form>
                    </div>

                    counterdo++;
                }
                else if (counterdo > 1)
                {
                    <div class="carousel-item">
                        <form asp-controller="Wines" asp-action="SourcePreferences">
                            <input type="hidden" name="sourceId" value="@source.Id" />
                            <input type="image" src="~/img/dologo/@source.Logo" />
                        </form>
                    </div>
                }
            }
        </div>
    </div>
</div>

<!---------------------------------------------------------------------------------------------------------------------------------------------------->

<div class="winesblock">

    <h2 class="winestitle">Vinos</h2>

    @if (_signInManager.IsSignedIn(User))
    {
        <!--PARA EL USUARIO REGISTRADO-->
        <h3>También te gustarán</h3>
    }
    else
    {
        <!--NO REGISTRADO-->
        <h3>Los vinos más vistos</h3>
    }

    <div id="carouselwines" class="carousel slide" data-interval="2000" data-ride="carousel">
        <div class="carousel-inner">

            @{
                int counterwines = 1;
            }

            @foreach (Wine wine in Model.ListWineTaste)
            {

                if (counterwines == 1)
                {
                    <div class="carousel-item active">
                        <form asp-controller="Wines" asp-action="Details">
                            <input type="hidden" name="id" value="@wine.Id" />
                            <input type="image" src="~/img/wines/@wine.Image" />
                        </form>

                        <div class="carousel-caption d-none d-md-block">
                            <p>Tipo: @wine.Colour.ColourType, Dulzor: @wine.Sweetnes.SweetnesType, D.O.: @wine.Source.SourceType</p>
                        </div>
                    </div>

                    counterwines++;
                }
                else if (counterwines > 1)
                {
                    <div class="carousel-item">
                        <form asp-controller="Wines" asp-action="Details">
                            <input type="hidden" name="id" value="@wine.Id" />
                            <input type="image" src="~/img/wines/@wine.Image" />
                        </form>
                        <p>Tipo: @wine.Colour.ColourType, Dulzor: @wine.Sweetnes.SweetnesType, D.O.: @wine.Source.SourceType</p>
                    </div>
                }
            }
        </div>
    </div>
</div>

<!---------------------------------------------------------------------------------------------------------------------------------------------------->


@*@foreach (wine wine in model.listwinetaste)
    {
        <form asp-controller="wines" asp-action="details">
            <input type="hidden" name="id" value="@wine.id" />
            <input type="image" src="~/img/wines/@wine.image" />
        </form>
        <p>@wine.colour.colourtype,@wine.sweetnes.sweetnestype,@wine.source.sourcetype</p>

        la etiqueta <a> es solo para indicaros la ruta
    }*@